<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:th="http://www.thymeleaf.org"
    xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layouts/main}">
<head>
<meta charset="UTF-8">
<title>Distributor Requisition</title>

</head>
<body>
<div layout:fragment="content">
<div class="row">
        
                <div class="col-md-12">
                <div class="box">
            <div class="box-header">
            </div>
            <!-- /.box-header -->
            <div class="box-body">
             <div class="row">
               <div class="col-sm-7">
               <div class="form-group">
                
                  <div class="col-sm-8">                
                 <select class="form-control" id="distributor_id" name="distributor_id">
                  <option value=""> - - Select a Distributor- - </option>
                    <option th:each="distributor : ${distList}" th:value="${distributor.id}"
                            th:utext="${distributor.distributorName}" />
                  </select>
                  </div>
                </div>
               </div>
               </div>
               <br/>
                <div class="row">
             <form id="quickForm"> 
               
           
             <div class="col-md-14">
             
                <div class="col-sm-3">
               <div class="form-group">
                  <label for="amount" class="col-sm-5 control-label">Product</label>

                   <div class="col-sm-8">
                   <select  id="product_id" name="product_id" class="form-control select2 select2-hidden-accessible" data-placeholder=" - - Select a Product - - " style="width: 100%;" data-select2-id="7" tabindex="-1" aria-hidden="true">
                  <option value=""> - - Select a Product - - </option>
                    <option th:each="product : ${product}" th:value="${product.id}"
                            th:utext="${product.productName}" />
                  </select>
                  </div>
                </div>
               </div>
               
                <div class="col-sm-3">
               <div class="form-group">
                  <label for="amount" class="col-sm-7 control-label">Unit Price</label>

                  <div class="col-sm-7">
                    <input  class="form-control" id="unit_price" name="uniprice" required="required"/>
                  </div>
                </div>
               </div>
              <div class="col-sm-3">
                 
               <div class="form-group">
                <div class="row">
                   <label for="amount" class="col-sm-7 control-label">Required Quantity</label>

                  <div class="col-sm-7">
                    <input  class="form-control" id="received_qty" name="receivedQty" required="required" />
                  </div>
                  <div class="col-sm-3">
               <!--  <button style="margin-top:5px;" onclick="productUpdate();" class="btn btn-info pull-right">Add</button> -->
            	<input class="btn btn-info pull-right" type="submit" value="Add">
               </div>
                  </div>
                 
                </div>
               </div>
            
              <!-- /.box-body -->
              
              
          </div>
          
         
          </form>
           </div>
          <!-- /.box -->
            
         <div class="row">
        <div class="col-sm-10">
            <h2>List Products</h2>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12">
            <table id="productTable" class="table table-bordered table-condensed table-striped">
                <thead>
                    <tr>
                     <th hidden=true>Product Id</th>
                        <th>Product Name</th>
                        <th>Quantity</th>
                        <th>Unit Price</th>
                        <th>Total Price</th>
                        <th>Discount</th>
                        <th>Grand Total</th>
                        <th>#</th>
                    </tr>
                </thead>
            </table>
            
             <table id="freeTable" class="table table-striped">
               
            </table>
            <hr>
            <table style="margin-left:79%">
            <tr><td ><b>Net Total : <span id="netTotal">0 TK.</span></b></td></tr>
             <tr><td ><b>Net Discount : <span id="netDiscount">0 TK.</span></b></td></tr>
              <tr><td ><b>Grand Total : <span id="netGrandTotal">0 TK.</span></b></td></tr>               
            </table>
        <br>
          <button style="margin-left:5px;" onclick="allDistributorproductListSubmitToServer();" class="btn btn-info pull-right">Save</button>        
            </div>
    </div>
   
        </div>
        
        </div>
      
        </div>
    
</div>
<div id="cashback" class="row" hidden=true>       
                <div class="col-md-12">
                <div class="box">
            <div class="box-header">
            
              <h3 class="box-title">Available Cash Back Offers </h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
    <table id="cashBackTable" class="table table-bordered table-condensed table-striped">
                <thead>
                    <tr>
                     <th  hidden=true>Campaign Id</th>
                        <th>Campaign Name</th>
                        <th>Required Invoice Amount</th>
                        <th>Discount Type</th>
                        <th>Discount Amount</th>
                        <th>Campaign Start Date</th>
                        <th>Campaign End Date</th>
                        
                    </tr>
                </thead>
            </table>
        </div>
        
        </div>
      
        </div>
    
</div>
<div id="productwise" class="row" hidden=true>
        
                <div class="col-md-12">
                <div class="box">
            <div class="box-header">
            
              <h3 class="box-title">Available Product Wise Offers </h3>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
    <table id="productOfferTable" class="table table-bordered table-condensed table-striped">
                <thead>
                    <tr>
                      <th  hidden=true>Campaign Id</th>
                     <th>Campaign Name</th>
                        <th>Product Name</th>
                        <th>Discount Type</th>
                        <th>Discount Amount</th>
                        <th>Discount On</th>
                        <th>Free Item</th>
                        <th>Quantity</th>
                        <th>Campaign Start Date</th>
                        <th>Campaign End Date</th>
                    </tr>
                </thead>
            </table>
        </div>
        
        </div>
      
        </div>
    
</div>
</div>
<div layout:fragment="custom-scripts">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" ></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js" ></script>
    <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
<script th:src="@{/js/distributorRequisition.js}"></script>
<script th:inline="javascript">
/*<![CDATA[*/
var baseurl=/*[[${baseurl}]]*/;
$(document).ready(function() {
	$('.select2').select2();
	setBaseUrl(baseurl);
	getDropDownValue();
	getAvailableOffer();
	getAvailableProductWiseOffer();
});

$(function () {

    $('#quickForm').validate({
      rules: {            
          received_qty: {
          required: true
        },
        unit_price: {
              required: true
        }
        
      },
      messages: {
          received_qty: {
          required: "Please enter a received_qty"
        },
        unit_price: {
              required: "Please enter a unit_price"
        }
        
      },
      errorElement: 'span',
      errorPlacement: function (error, element) {
        error.addClass('invalid-feedback');
        element.closest('.form-group').append(error);
      },
      highlight: function (element, errorClass, validClass) {
        $(element).addClass('is-invalid');
      },
      unhighlight: function (element, errorClass, validClass) {
        $(element).removeClass('is-invalid');
      }
    });
    
  });

/*]]>*/
</script>
</div>
</body>
</html>